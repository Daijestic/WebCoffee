<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="_csrf" th:content="${_csrf.token}" th:if="${_csrf}">
    <meta name="_csrf_header" th:content="${_csrf.headerName}" th:if="${_csrf}">
    <title>Trang Quản Trị</title>
    <link rel="stylesheet" th:href="@{/css/admin.css}" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
<!-- Sidebar -->
<div class="sidebar">
    <div class="sidebar-header">
        <h2>DND Coffee Admin</h2>
    </div>
    <div class="menu-items">
        <a class="menu-item active" th:href="@{/admin/}">
            <i class="fas fa-tachometer-alt"></i>
            <span>Bảng điều khiển</span>
        </a>

        <div class="menu-category">Quản lý danh mục</div>
        <a class="menu-item" th:href="@{/admin/users}">
            <i class="fas fa-users-cog"></i>
            <span>Quản lý tài khoản</span>
        </a>
        <a class="menu-item"  th:href="@{/admin/employee}">
            <i class="fas fa-user-tie"></i>
            <span>Quản lý nhân viên</span>
        </a>
        <a class="menu-item" th:href="@{/admin/client}">
            <i class="fas fa-user-friends"></i>
            <span>Quản lý khách hàng</span>
        </a>

        <div class="menu-category">Quản lý kho và menu</div>
        <a class="menu-item" th:href="@{/admin/quanlikho}">
            <i class="fas fa-truck-loading"></i>
            <span>Quản lý kho</span>
        </a>
        <a class="menu-item" th:href="@{/admin/nhapkho}">
            <i class="fas fa-truck-loading"></i>
            <span>Nhập kho</span>
        </a>
        <a class="menu-item" th:href="@{/admin/xuatkho}">
            <i class="fas fa-dolly-flatbed"></i>
            <span>Xuất kho</span>
        </a>
        <a class="menu-item" th:href="@{/admin/products}">
            <i class="fas fa-coffee"></i>
            <span>Quản lý Menu</span>
        </a>

        <div class="menu-category">Quản lý lương</div>
        <a class="menu-item" th:href="@{/admin/calamviec}">
            <i class="fas fa-user-clock"></i>
            <span>Quản lý ca</span>
        </a>
        <a class="menu-item"  th:href="@{/admin/lichlamviec}">
            <i class="fas fa-calendar-alt"></i>
            <span>Lịch làm việc</span>
        </a>

        <div class="menu-category">Quản lý bán hàng</div>
        <a class="menu-item"  th:href="@{/admin/donhang}">
            <i class="fas fa-shopping-cart"></i>
            <span>Quản lý đơn hàng</span>
        </a>
        <a class="menu-item" th:href="@{/admin/reports}">
            <i class="fas fa-chart-line"></i>
            <span>Báo cáo thống kê</span>
        </a>

        <div class="menu-category">Hệ thống</div>
        <a class="menu-item" th:href="@{/admin/settings}">
            <i class="fas fa-cog"></i>
            <span>Cài đặt</span>
        </a>
        <a class="menu-item" th:href="@{/logout}">
            <i class="fas fa-sign-out-alt"></i>
            <span>Đăng xuất</span>
        </a>
    </div>
</div>


<!-- Main Content -->
<div class="main-content">
    <!-- Header -->
    <div class="header">
        <h1>Bảng điều khiển</h1>
        <div class="user-profile">
            <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDQwIDQwIj48Y2lyY2xlIGN4PSIyMCIgY3k9IjIwIiByPSIyMCIgZmlsbD0iI2U5ZWNlZiIvPjxwYXRoIGQ9Ik0yMCwyMGE2LDYsMCwxLDAsLTYtNkE2LDYsMCwwLDAsMjAsMjBabTAsMy0xMi45LDBBOSw5LDAsMCwwLDcsMzJIMzNhOSw5LDAsMCwwLTEuMS05WiIgZmlsbD0iI2FkYjViZCIvPjwvc3ZnPg==" alt="Avatar">
            <!-- Sử dụng ho_ten từ nhanVien hoặc khachHang, với giá trị mặc định -->
            <span th:text="${user.hoTen}"></span>
        </div>
    </div>

    <!-- Stats Cards -->
    <div class="stats-cards">
        <div class="card">
            <div class="card-title">TỔNG NGƯỜI DÙNG</div>
            <div class="card-value" th:text="${userCount != null ? userCount : '1,254'}">1,254</div>
            <div class="card-footer"><i class="fas fa-arrow-up"></i> Tăng 12% so với tháng trước</div>
        </div>
        <div class="card">
            <div class="card-title">ĐƠN HÀNG MỚI</div>
            <div class="card-value" th:text="${newOrderCount != null ? newOrderCount : '42'}">42</div>
            <div class="card-footer"><i class="fas fa-arrow-up"></i> Tăng 5% so với tháng trước</div>
        </div>
        <div class="card">
            <div class="card-title">DOANH THU</div>
            <div class="card-value" th:text="${revenue != null ? revenue : '48,500,000đ'}">48,500,000đ</div>
            <div class="card-footer"><i class="fas fa-arrow-up"></i> Tăng 8% so với tháng trước</div>
        </div>
        <div class="card">
            <div class="card-title">LƯỢT TRUY CẬP</div>
            <div class="card-value" th:text="${visitorCount != null ? visitorCount : '28,125'}">28,125</div>
            <div class="card-footer"><i class="fas fa-arrow-up"></i> Tăng 15% so với tháng trước</div>
        </div>
    </div>

    <!-- Data Table -->
    <div class="data-table">
        <div class="data-table-header">
            <h2>Đơn hàng gần đây</h2>
            <button class="action-btn" th:onclick="@{/admin/orders}">Xem tất cả</button>
        </div>
        <table>
            <thead>
            <tr>
                <th>Mã đơn hàng</th>
                <th>Khách hàng</th>
                <th>Ngày đặt</th>
                <th>Tổng tiền</th>
                <th>Trạng thái</th>
                <th>Thao tác</th>
            </tr>
            </thead>
            <tbody>
            <!-- Kiểm tra danh sách đơn hàng có rỗng không -->
            <tr>
                <td>#ORD-2023-1001</td>
                <td>Nguyễn Văn A</td>
                <td>01/04/2023</td>
                <td>2,500,000đ</td>
                <td>Đã giao hàng</td>
                <td>
                    <button class="action-btn edit" >Xem</button>
                    <button class="action-btn delete" >Hủy</button>
                </td>
            </tr>
            <!-- Dữ liệu mẫu nếu recentOrders rỗng -->
            <tr >
                <td>#ORD-2023-1001</td>
                <td>Nguyễn Văn A</td>
                <td>01/04/2023</td>
                <td>2,500,000đ</td>
                <td>Đã giao hàng</td>
                <td>
                    <button class="action-btn edit" data-id="#ORD-2023-1001">Xem</button>
                    <button class="action-btn delete" data-id="#ORD-2023-1001">Hủy</button>
                </td>
            </tr>
            <tr >
                <td>#ORD-2023-1002</td>
                <td>Trần Thị B</td>
                <td>02/04/2023</td>
                <td>1,800,000đ</td>
                <td>Đang xử lý</td>
                <td>
                    <button class="action-btn edit" data-id="#ORD-2023-1002">Xem</button>
                    <button class="action-btn delete" data-id="#ORD-2023-1002">Hủy</button>
                </td>
            </tr>
            <tr>
                <td>#ORD-2023-1003</td>
                <td>Lê Văn C</td>
                <td>03/04/2023</td>
                <td>3,200,000đ</td>
                <td>Đang giao hàng</td>
                <td>
                    <button class="action-btn edit" data-id="#ORD-2023-1003">Xem</button>
                    <button class="action-btn delete" data-id="#ORD-2023-1003">Hủy</button>
                </td>
            </tr>
            <tr>
                <td>#ORD-2023-1004</td>
                <td>Phạm Thị D</td>
                <td>03/04/2023</td>
                <td>1,200,000đ</td>
                <td>Đã hủy</td>
                <td>
                    <button class="action-btn edit" data-id="#ORD-2023-1004">Xem</button>
                    <button class="action-btn delete" data-id="#ORD-2023-1004">Hủy</button>
                </td>
            </tr>
            <tr >
                <td>#ORD-2023-1005</td>
                <td>Hoàng Văn E</td>
                <td>04/04/2023</td>
                <td>4,500,000đ</td>
                <td>Đang xử lý</td>
                <td>
                    <button class="action-btn edit" data-id="#ORD-2023-1005">Xem</button>
                    <button class="action-btn delete" data-id="#ORD-2023-1005">Hủy</button>
                </td>
            </tr>
            </tbody>
        </table>
        <div class="pagination">
            <a href="#" class="active">1</a>
            <a href="#">2</a>
            <a href="#">3</a>
            <a href="#">4</a>
            <a href="#">5</a>
            <a href="#">»</a>
        </div>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        const ordersMenu = document.getElementById("orders-menu");
        const ordersSubmenu = document.getElementById("orders-submenu");

        ordersMenu.addEventListener("click", function(event) {
            // Ngừng hành động mặc định của liên kết
            event.preventDefault();

            // Toggle trạng thái hiển thị của submenu
            if (ordersSubmenu.style.display === "block") {
                ordersSubmenu.style.display = "none";
            } else {
                ordersSubmenu.style.display = "block";
            }
        });
    });

</script>

</body>

</html>