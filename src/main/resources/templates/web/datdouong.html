<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" th:href="@{/css/resetcss.css}">
    <link rel="stylesheet" th:href="@{/css/muangay.css}">
    <link rel="stylesheet" th:href="@{https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css}">
    <link rel="icon" th:href="@{/image/Anh1.png}">
    <title>DND COFFEE</title>
</head>
<body>
    <div class="top-bar">
        GIAO H√ÄNG TO√ÄN QU·ªêC
    </div>

    <div class="header">
        <div class="menu-button" id="menu-toggle">
            <div class="menu-icon">‚ò∞</div>
            <div class="menu-text">MENU</div>
        </div>
        <a th:href = "@{/index}">
        <img th:src="@{/image/Anh1.png}" alt="DND Coffee" class="logo">
        </a>
        <div class="search-bar">
            <div class="search-form">
                <input type="text" class="search-input" placeholder="T√¨m s·∫£n ph·∫©m...">
                <button class="search-button">
                    <span class="search-icon">‚åï</span>
                </button>
            </div>
        </div>

        <div class="user-actions">
            <a th:href="@{/login}" style="text-decoration: none;">
              <div class="account">
                  <div class="user-icon">üë§</div>
                  <div>T√†i kho·∫£n</div>
              </div>
            </a>
            <div class="cart" id = "menu-cart">
                <div class="cart-icon">üõí</div>
                <div class="cart-count">0</div>
                <div>Gi·ªè h√†ng</div>
            </div>
        </div>
        <nav class="sidebar" id="sidebar">
            <div class="close-btn" id="close-menu">‚úñ</div>
            <ul class="menu">

                <li class="has-submenu">
                    <a href="#">TRANG CH·ª¶</a>
                    <ul class="submenu">
                        <li><a href="#">Trang ch·ªß</a></li>
                        <li><a href="../webbuy/flashdeal.html">FLASH DEAL</a></li>
                        <li><a href="#">T·∫æT 2025</a></li>
                    </ul>
                </li>
                <li class="has-submenu">
                    <a href="../webbuy/flashdeal.html">FLASH DEAL</a>
                    <ul class="submenu">
                        <li><a href="../webbuy/flashdeal.html">FLASH DEAL</a></li>
                    </ul>
                </li>
                <li><a href="#">MUA S·ªà</a></li>
                <li class="has-submenu">
                    <a href="#">GI·ªöI THI·ªÜU</a>
                    <ul class="submenu">
                        <li><a href="#">C√† Ph√™ Rang Xay</a></li>
                        <li><a href="#">Gi·ªõi thi·ªáu</a></li>
                        <li><a href="#">Gi·ªõi thi·ªáu S·∫£n ph·∫©m DND Coffee¬Æ</a></li>
                    </ul>
                </li>
                <li><a href="#">TIN T·ª®C</a></li>
            </ul>
        </nav>

        <nav class="cartbar" id="cartbar">
          <div class="close-btn" id="close-cart">‚úñ</div>
          <div class="cart-header">
              GI·ªé H√ÄNG
          </div>
          <div class="cart-items" id="cart-items">
              <!-- C√°c s·∫£n ph·∫©m trong gi·ªè h√†ng s·∫Ω ƒë∆∞·ª£c th√™m v√†o ƒë√¢y qua JavaScript -->
              <!-- V√≠ d·ª• v·ªÅ m·ªôt s·∫£n ph·∫©m: -->
              <div class="cart-item">
                  <img src="../image/TruyenThong1kg.png" alt="S·∫£n ph·∫©m c√† ph√™">
                  <div class="cart-item-info">
                      <div class="cart-item-title">(Gi·∫£m 10%) Combo 2 C√† Ph√™ Rang Xay Truy·ªÅn Th·ªëng Highlands Coffee 1kg</div>
                      <div class="cart-item-price">775.800ƒë</div>
                      <div class="cart-item-quantity">
                          <div class="quantity-btn decrease">-</div>
                          <input type="number" min="1" class="quantity-input" value="10">
                          <div class="quantity-btn increase">+</div>
                      </div>
                      <div class="cart-item-remove">B·ªè s·∫£n ph·∫©m</div>
                  </div>
              </div>
          </div>
          <div class="cart-footer">
              <div class="cart-total">
                  <div>T·ªïng ti·ªÅn:</div>
                  <div class="cart-total-price">7.758.000ƒë</div>
              </div>
              <button class="checkout-btn">Thanh to√°n</button>
          </div>
      </nav>
    </div>
    
    

    <div class="nav-bar">
        <a href="#" class="nav-item home-icon">üè†</a>
        <a href="#" class="nav-item active">TRANG CH·ª¶</a>
        <a href="#" class="nav-item">FLASH DEAL</a>
        <a href="#" class="nav-item">MUA S·ªà</a>
        <a href="#" class="nav-item">GI·ªöI THI·ªÜU</a>
        <a href="#" class="nav-item">TIN T·ª®C</a>
    </div>
    
    <div class="category-bar">
        <a href="#" class="category-item">C√† Ph√™ Rang Xay</a>
        <a href="#" class="category-item">C√† Ph√™ H·∫°t</a>
        <a href="#" class="category-item">C√† Ph√™ U·ªëng Li·ªÅn</a>
        <a href="#" class="category-item">C√† Ph√™ H√≤a Tan</a>
    </div>
    
    <div class="banner">
        <img src="../image/Anhsale.png" alt="Deal ƒë·∫∑c quy·ªÅn tri √¢n kh√°ch h√†ng">
    </div>
    
    <div class="features">
        <div class="feature">
            <img src="../image/policy_1.webp" alt="Giao h√†ng">
            <div class="feature-text">Giao h√†ng</div>
        </div>
        
        <div class="feature">
            <img src="../image/policy_2.webp" alt="ƒê·ªôc quy·ªÅn">
            <div class="feature-text">ƒê·ªòC QUY·ªÄN</div>
        </div>
        
        <div class="feature">
            <img src="../image/policy_3.webp" alt="B√°n ch·∫°y">
            <div class="feature-text">B√°n ch·∫°y</div>
        </div>
        
        <div class="feature">
            <img src="../image/policy_4.webp" alt="C·ª≠a h√†ng">
            <div class="feature-text">C·ª≠a h√†ng</div>
        </div>
        
        <div class="feature">
            <img src="../image/policy_5.webp" alt="C√°ch pha">
            <div class="feature-text">C√°ch pha</div>
        </div>
        
        <div class="feature">
            <img src="../image/policy_6.webp" alt="Li√™n h·ªá">
            <div class="feature-text">Li√™n h·ªá</div>
        </div>
    </div>

    <div class="flash-sale-container" th:each="entry : ${menuMap}">
        <div class="flash-sale-header">
            <div class="flash-sale-title">
                <span class="flash-icon">‚ö°</span>
                <h2 th:text="${entry.key}">T√™n lo·∫°i</h2>
                <span class="divider">|</span>
            </div>
            <button class="view-all-btn">Xem t·∫•t c·∫£</button>
        </div>

        <div class="product-slider">
            <div class="product-card" th:each="product : ${entry.value}">
                <div class="discount-badge">7%</div>
                <div class="product-image">
                    <img th:src="@{'/image/' + ${product.path}}" th:alt="${product.tenMon}">
                </div>
                <div class="product-info">
                    <h3 class="product-title" th:text="${product.tenMon}"></h3>
                    <div class="product-price">
                    <span class="current-price"
                          th:text="${#numbers.formatInteger(product.giaBan, 3, 'POINT') + 'ƒë'}"></span>
                    </div>
                    <div class="product-rating">
                        <span class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                        <button class="cart-btn">üõí</button>
                    </div>
                    <button class="buy-btn">
                        <span class="cart-icon">üõí</span> Ch·ªçn mua
                    </button>
                </div>
            </div>
        </div>
    </div>









    <!-- Footer Section -->
<footer class="footer-container">
    <div class="footer-content">
      <!-- Company Info -->
      <div class="footer-column company-info">
        <h3 class="footer-heading">C√îNG TY TNHH DuongDai</h3>
        <p class="company-description">
          C√¥ng ty ph√¢n ph·ªëi h·ª£p l·ªá s·∫£n ph·∫©m c√† ph√™ th∆∞∆°ng hi·ªáu DND Coffee¬Æ.
        </p>
        <div class="certification">
          <img src="../image/logo_bct.webp" alt="B·ªô C√¥ng Th∆∞∆°ng certification" class="certification-image">
        </div>
      </div>
  
      <!-- Contact Info -->
      <div class="footer-column contact-info">
        <h3 class="footer-heading">TH√îNG TIN</h3>
        <p class="address">
          Tr·ª• s·ªü vƒÉn ph√≤ng: 17 Tr·∫ßn Ph√∫, H√† ƒê√¥ng, H√† N·ªôi
        <p class="phone">ƒêi·ªán tho·∫°i: 0365619789</p>
        <p class="email">Email: duongdaidnd@gmai;.com</p>
      </div>
  
      <!-- Customer Support -->
      <div class="footer-column customer-support">
        <h3 class="footer-heading">H·ªñ TR·ª¢ KH√ÅCH H√ÄNG</h3>
        <ul class="support-links">
          <li><a href="#">‚Ä¢ T√¨m ki·∫øm</a></li>
          <li><a href="#">‚Ä¢ Ch√≠nh s√°ch ƒë·ªïi tr·∫£</a></li>
          <li><a href="#">‚Ä¢ Ch√≠nh s√°ch b·∫£o m·∫≠t</a></li>
          <li><a href="#">‚Ä¢ Ch√≠nh s√°ch giao h√†ng</a></li>
          <li><a href="#">‚Ä¢ Li√™n h·ªá</a></li>
        </ul>
      </div>
  
      <!-- Customer Care -->
      <div class="footer-column customer-care">
        <h3 class="footer-heading">CHƒÇM S√ìC KH√ÅCH H√ÄNG</h3>
        <div class="phone-contact">
          <div class="phone-icon-container">
            <span class="phone-icon">üìû</span>
          </div>
          <div class="contact-numbers">
            <p class="bagged-coffee">C√† ph√™ ƒë√≥ng g√≥i: 091.756.1212</p>
            <p class="cafe-service">C√† ph√™ t·∫°i qu√°n: 1900.1755</p>
            <p class="email-contact">duongdaidnd.com</p>
          </div>
        </div>
        
        <div class="social-media">
          <h4 class="social-heading">FOLLOW US</h4>
          <div class="social-icons">
            <a href="#" class="social-link"><span class="social-icon">facebook</span></a>
            <a href="#" class="social-link"><span class="social-icon">twitter</span></a>
            <a href="#" class="social-link"><span class="social-icon">youtube</span></a>
            <a href="#" class="social-link"><span class="social-icon">instagram</span></a>
          </div>
        </div>
      </div>
    </div>
  </footer>
    <script>
        console.log("muangay.js is loaded");

        document.addEventListener("DOMContentLoaded", function () {
            const menuToggle = document.getElementById("menu-toggle");
            const sidebar = document.getElementById("sidebar");
            const closeMenu = document.getElementById("close-menu"); // ƒê√≥ng menu
            const menuCart = document.getElementById("menu-cart");
            const cartbar = document.getElementById("cartbar");
            const closeCart = document.getElementById("close-cart"); // ƒê√≥ng gi·ªè h√†ng

            // M·ªü thanh menu khi nh·∫•n v√†o menu toggle
            menuToggle.addEventListener("click", function () {
                sidebar.classList.add("active");
            });

            // ƒê√≥ng thanh menu khi nh·∫•n v√†o n√∫t ƒë√≥ng
            closeMenu.addEventListener("click", function () {
                sidebar.classList.remove("active");
            });

            // M·ªü thanh gi·ªè h√†ng khi nh·∫•n v√†o menu cart
            menuCart.addEventListener("click", function () {
                cartbar.classList.add("active");
            });

            // ƒê√≥ng thanh gi·ªè h√†ng khi nh·∫•n v√†o n√∫t ƒë√≥ng gi·ªè h√†ng
            closeCart.addEventListener("click", function () {
                cartbar.classList.remove("active");
            });

            // X·ª≠ l√Ω c√°c menu c√≥ submenu
            document.querySelectorAll(".has-submenu > a").forEach(item => {
                item.addEventListener("click", function (e) {
                    e.preventDefault();
                    this.parentElement.classList.toggle("active");
                });
            });
            // Ch·ª©c nƒÉng c√°c n√∫t tƒÉng/gi·∫£m s·ªë l∆∞·ª£ng
            const decreaseBtns = document.querySelectorAll('.decrease');
            const increaseBtns = document.querySelectorAll('.increase');
            const removeItemBtns = document.querySelectorAll('.cart-item-remove');
            const quantityInputs = document.querySelectorAll('.quantity-input');

            decreaseBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const input = this.nextElementSibling;
                    let value = parseInt(input.value);
                    if (value > 1) {
                        input.value = value - 1;
                        capNhatTongTien();
                    }
                });
            });

            increaseBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const input = this.previousElementSibling;
                    let value = parseInt(input.value);
                    input.value = value + 1;
                    capNhatTongTien();
                });
            });

            // Th√™m ch·ª©c nƒÉng nh·∫≠p s·ªë l∆∞·ª£ng tr·ª±c ti·∫øp
            quantityInputs.forEach(input => {
                // X·ª≠ l√Ω khi ng∆∞·ªùi d√πng nh·∫≠p s·ªë l∆∞·ª£ng
                input.addEventListener('input', function() {
                    // ƒê·∫£m b·∫£o gi√° tr·ªã nh·∫≠p v√†o l√† s·ªë nguy√™n d∆∞∆°ng
                    let value = parseInt(this.value);

                    // N·∫øu ng∆∞·ªùi d√πng x√≥a h·∫øt s·ªë ho·∫∑c nh·∫≠p m·ªôt gi√° tr·ªã kh√¥ng ph·∫£i s·ªë
                    if (isNaN(value) || value <= 0) {
                        this.value = 1;
                    }

                    // C·∫≠p nh·∫≠t t·ªïng ti·ªÅn sau m·ªói thay ƒë·ªïi
                    capNhatTongTien();
                });

                // X·ª≠ l√Ω khi ng∆∞·ªùi d√πng r·ªùi kh·ªèi √¥ nh·∫≠p
                input.addEventListener('blur', function() {
                    // ƒê·∫£m b·∫£o gi√° tr·ªã t·ªëi thi·ªÉu l√† 1
                    if (this.value === '' || parseInt(this.value) < 1) {
                        this.value = 1;
                    }
                    // ƒê·∫£m b·∫£o c·∫≠p nh·∫≠t l·∫°i t·ªïng ti·ªÅn
                    capNhatTongTien();
                });

                // X·ª≠ l√Ω khi ng∆∞·ªùi d√πng nh·∫•n Enter
                input.addEventListener('keyup', function(e) {
                    if (e.key === 'Enter') {
                        this.blur(); // Lo·∫°i b·ªè focus kh·ªèi input
                        capNhatTongTien();
                    }
                });

                // NgƒÉn ch·∫∑n c√°c k√Ω t·ª± kh√¥ng ph·∫£i s·ªë
                input.addEventListener('keypress', function(e) {
                    if (!/[0-9]/.test(e.key)) {
                        e.preventDefault();
                    }
                });
            });

            removeItemBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    this.closest('.cart-item').remove();
                    capNhatTongTien();
                    capNhatSoLuongGioHang();
                    kiemTraGioHangTrong(); // Ki·ªÉm tra xem gi·ªè h√†ng c√≥ tr·ªëng kh√¥ng sau khi x√≥a
                });
            });

            // H√†m c·∫≠p nh·∫≠t t·ªïng ti·ªÅn
            function capNhatTongTien() {
                const cartItems = document.querySelectorAll('.cart-item');
                let total = 0;

                cartItems.forEach(item => {
                    const quantityInput = item.querySelector('.quantity-input');
                    const priceElement = item.querySelector('.cart-item-price');

                    if (quantityInput && priceElement) {
                        const quantity = parseInt(quantityInput.value) || 1; // M·∫∑c ƒë·ªãnh l√† 1 n·∫øu kh√¥ng h·ª£p l·ªá
                        const priceText = priceElement.textContent;
                        const price = parseInt(priceText.replace(/\D/g, ''));
                        total += quantity * price;
                    }
                });

                document.querySelector('.cart-total-price').textContent = dinhDangTien(total) + 'ƒë';
            }

            // H√†m c·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng s·∫£n ph·∫©m trong gi·ªè h√†ng
            function capNhatSoLuongGioHang() {
                const cartItems = document.querySelectorAll('.cart-item').length;
                const cartCountElement = document.querySelector('.cart-count');
                if (cartCountElement) {
                    cartCountElement.textContent = cartItems;
                }
            }

            // H√†m ƒë·ªãnh d·∫°ng ti·ªÅn t·ªá
            function dinhDangTien(price) {
                return price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
            }

            // Kh·ªüi t·∫°o gi·ªè h√†ng
            capNhatTongTien();
            capNhatSoLuongGioHang();

            // Th√™m tr·∫°ng th√°i gi·ªè h√†ng tr·ªëng
            function kiemTraGioHangTrong() {
                const cartItems = document.querySelectorAll('.cart-item').length;
                const cartItemsContainer = document.getElementById('cart-items');
                const cartFooter = document.querySelector('.cart-footer');

                if (cartItems === 0) {
                    const emptyCartHTML = `
              <div class="empty-cart">
                  <div class="empty-cart-icon">üõí</div>
                  <p>Gi·ªè h√†ng c·ªßa b·∫°n ƒëang tr·ªëng</p>
                  <p>H√£y th√™m s·∫£n ph·∫©m v√†o gi·ªè h√†ng!</p>
              </div>
          `;
                    cartItemsContainer.innerHTML = emptyCartHTML;

                    // ·∫®n ph·∫ßn footer khi gi·ªè h√†ng tr·ªëng
                    if (cartFooter) {
                        cartFooter.style.display = 'none';
                    }
                } else if (cartFooter) {
                    // Hi·ªÉn th·ªã l·∫°i footer n·∫øu c√≥ s·∫£n ph·∫©m
                    cartFooter.style.display = 'block';
                }
            }

            kiemTraGioHangTrong();
        });
    </script>


    <script type="text/javascript" src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>

</body>
</html>